# 五、特征描述属性的分类

因为恩特威斯尔夫妇渴望秩序、富足和安宁(他们的意思是东西应该留在他们放置的地方)

—J. R. R .托尔金《指环王》

本章为特性描述开发了一个通用的*视觉度量分类法*，以便收集概要描述符属性用于高级分析。分类法包括一套通用的*鲁棒性标准* 用于特征描述和基本事实数据集。本书中介绍和讨论的材料遵循并反映了这一分类法。通过开发分类法中的标准词汇表，术语和技术可以得到一致的交流和更好的理解。在第六章的中的特征描述符方法的调查中，分类法被用来记录*‘什么’*从业者正在做什么。

如图 5-1 所示，视觉度量分类基于特征描述符维度，使用三个轴——形状和模式、光谱和密度——旨在创建一个简单的分析和讨论框架。在没有标准的地方引入了一些新的术语和概念，例如术语特征描述符系列。这些已经被分解成局部二进制描述符、光谱描述符、基空间描述符和多边形形状描述符的类别；这些描述符家族也在第四章中详细讨论。此外，分类法从文献中借用了一些有用的术语，包括一些关于健壮性和不变性属性的术语。

![9781430259299_Fig05-01.jpg](img/9781430259299_Fig05-01.jpg)

图 5-1 。特征描述符维度的分类法，包括(1)作为全局、区域和稀疏局部的特征密度；(2)用于计算描述符的像素的形状和图案，包括矩形、圆形和稀疏采样图案；(3)光谱，包括特征本身所包含的光谱信息

为什么要创建一个保证是模糊的、包含几个变量的分类法，并且不能完美地表达任何特征描述符的属性呢？目的是提供一个框架来描述用于特性描述的各种设计方法。然而，分类法并不打算用来比较描述符的优点、性能或准确性。

愿景指标分类的三个轴是:

1.  **形状和图案:**如何从目标图像中获取像素。
2.  **密度:**描述符所需的图像范围，区分局部、区域和全局描述符。
3.  **Spectra:** 用于度量的标量和矢量，以及算法和计算的摘要分类。

特征描述符系列

特性描述符和度量标准已经沿着几条思路发展成独立的家族。在许多情况下，不同家庭的研究团体在研究不同的问题，很少有交叉授粉或共同利益。例如，细胞生物学和医学应用通常对多边形形状描述符感兴趣，在文献中也称为图像矩。正如在计算机视觉文献中所讨论的，那些涉及流行的移动电话增强现实应用的人可能对本地二进制描述符更感兴趣。在某些情况下，特征检测器和特征描述符有共同的概念，这将在第六章中详细讨论；这些包括梯度和局部二进制模式的使用。

基于图 5-1 所示的分类法，我们将功能分为以下几类:

*   **局部二元描述符。**这些采样点对位于局部区域，并创建二进制编码的位向量，每次比较 1 位，服从汉明距离特征匹配。例子包括 LBP，FREAK，ORB，BRISK，Census。
*   **光谱描述符。**这些使用广泛的光谱值，如梯度和区域平均值。对可用于这些特征的光谱没有实际限制。检测器中最常用的光谱之一是局部区域梯度，例如在 SIFT 中。梯度也用于几个兴趣点和边缘检测器，如 Harris，Sobel。
*   **基础空间描述符。**这些方法将特征向量编码成一组基函数，例如熟悉的正弦和余弦幅度和相位的傅立叶级数。此外，现有的和新的基础特征正在以稀疏码书和视觉词汇的形式被设计(我们不严格地使用术语基础空间)。
*   **多边形形状描述符。**这些采用由统计指标测量的物体形状，例如面积、周长和质心。通常，使用形态学视觉流水线和区域算法提取形状，这可能比特征检测器和特征描述符的局部算法更复杂(将在第八章中讨论)。*图像矩*【518】是文献中经常使用的描述形状特征的术语。

计算机视觉分类学的前期工作

几篇研究论文对稀疏局部特征的各个方面进行了比较和对比，该领域有大量比较关键点检测器[306，93]和特征描述符[145，107]的例子。新的特征描述符方法和改进通常与现有的方法相比较，利用几个鲁棒性和不变性标准。然而，缺乏正式的分类工作来突出影响设计和比较的微妙细节。关于涵盖最先进的计算机视觉方法的良好调查，参见 Szelinski [324]。

需要注意的是，计算机视觉是一个巨大的领域。每年有几千篇研究论文发表，还有几千篇同样有趣的研究论文被会议出版商拒绝。这里有一些值得注意的作品，它们调查并组织了特征度量和计算机视觉领域。

*   仿射共变兴趣点检测器。Mikolajczyk 等人【153】为仿射协变兴趣点检测器提供了一个很好的分类法。此外，Lindberg [150]广泛研究了与规模无关的兴趣点方法。然而，我们寻求一个更加丰富的分类法来涵盖特性描述符的设计原则，并且我们已经围绕具有共同设计特征的描述符方法家族开发了我们的分类法。
*   **带注释的计算机视觉参考书目。来自南加州大学，由 Keith Price 维护，该资源提供了计算机视觉几个分支的详细分类，以及该领域一些关键研究和计算机视觉资源的链接。 <sup>1</sup>**
*   进化中的、分布式的、非专有的、在线的计算机视觉纲要。这提供了一个全面而详细的计算机视觉主题列表。该网站由 Robert Fisher 维护，并对维基百科的关键文章进行了索引。这可能是目前最好的在线资源之一。 <sup>2</sup>
*   局部不变特征检测器综述。由蒂内·图亚特拉斯和王南钧·米科拉伊奇克[107]编写，该参考资料提供了几种特征描述方法的良好概述，以及对几种方法的局部特征、性能和精度评估、方法类型(角点检测器、斑点检测器、特征检测器)和实施细节的文献讨论。

鲁棒性和准确性

计算机视觉的一个关键目标是*鲁棒性*，或在各种条件下识别特征的能力。健壮性可以分解成几个属性。例如，检测一个特征应该在对给定应用至关重要的各种标准上是鲁棒的，例如比例、旋转或照明。我们也可以使用术语*不变性*或*不变性*来描述健壮性。最终目标是在不变性标准下的精确定位、一致性和鲁棒性。

然而，一些鲁棒性属性依赖于与其他变量相结合的特征描述符。例如，许多局部特征描述符方法基于选择的兴趣点方法计算位置和方向，因此描述符的准确性与兴趣点方法相关。距离函数和分类方法也是相互关联的，以确定最终精度。

![image](img/sq.jpg) **注意**因为不可能独立于兴趣点方法、分类器和距离函数来定义特征描述符的鲁棒性或准确性，所以存在混合和匹配众所周知的检测器和描述符以及各种分类器的机会，以产生期望的鲁棒性和准确性。

稳健性和准确性是以下因素的组合:

1.  **兴趣点准确性，**因为许多描述符依赖于关键点的位置和方向。
2.  **描述符精度，**随着每个描述符方法的不同而不同，并且可以调整。
3.  **分类器和距离函数精度，**作为一个差的分类器和匹配阶段会导致错误的结果。

因此，应用面临的部分挑战是逐个属性地定义鲁棒性标准，然后定义所寻求的不变性的界限。例如，从 1 倍到 100 倍放大的比例不变性可能不需要并且几乎不可能，但是从 1 倍到 4 倍的比例不变性可能是所需要的并且更容易达到。

健壮性的几个属性在这里被发展成一个健壮性分类。为了确定实际的稳健性，需要真实情况数据作为检查算法和测量结果的基础。第七章提供了地面实况数据选择和设计的背景。

通用稳健分类法

鲁棒性标准可以用属性来表示，并作为对这些属性的不变性或鲁棒性来度量。(参见第七章、表 7-1 ，了解关于每个鲁棒性标准属性的更多信息，以及创建真实情况数据集的注意事项。)稳健性标准和属性在以下组标题下分组:

*   照明
*   颜色
*   不完全
*   分辨率和距离
*   几何失真
*   歧视和独特性

每个鲁棒性标准组包含几个更细粒度的属性，如图图 5-2 所示。

![9781430259299_Fig05-02.jpg](img/9781430259299_Fig05-02.jpg)

图 5-2 。一般稳健性标准及其属性

让我们来看看这些健壮性属性，以及设计和实现特性描述符的一些实际考虑，以及处理这些属性的相应基础数据。

照明

光是所有成像的来源，在为给定应用设定要求时，它应该是分析和考虑的第一优先领域。照明有几个方面，与颜色和颜色空间分开考虑。在某些情况下，可以通过改变光源或添加或重新定位光源来校正照明。在其他情况下，需要图像预处理来校正光照，以便为进一步分析和特征提取准备图像。

对照明的关注怎么强调都不为过；例如，参见图 4-3 显示了在增加特征提取对比度方面改变照明的预处理效果。关键照明属性是:

*   **照明不均匀:**图像包含暗区域和亮区域，有时会模糊依赖于特定范围像素强度的特征。
*   **亮度:**总光线过多或过少，影响特征检测和匹配。
*   **对比:**强度带过窄、过宽，或包含在几个带中。
*   **晕影:**光线分布不均匀，如边缘周围较暗。

颜色标准

使用颜色时，颜色的准确性至关重要。色彩管理和色彩空间将在第二章中讨论，但一些主要考虑事项如下:

*   **色彩空间精确度:**应该使用哪种色彩空间——RGB、YIQ、HSV，还是 CIECAM02 Jch 或 Jab 等感知精确的色彩空间？每个色彩空间都有准确性和实用性方面的考虑，例如在色彩空间之间转换色彩的容易程度。
*   **颜色通道:**由于相机通常提供 RGB 数据，因此从 RGB 数据中提取灰度级强度通常很重要。有许多方法可以将 RGB 颜色转换为灰度强度，并且有许多颜色空间可供选择。
*   **颜色位深度:**颜色信息在使用时，必须足够精确以满足应用要求。例如，8 位颜色可能适用于大多数应用，除非有必要进行颜色辨别，因此可能需要每通道使用 10、12、14 或 16 位的更高精度颜色。

此外，根据所使用的相机传感器，每个颜色通道会有不同的信号特征，如颜色灵敏度和动态范围。对于要求苛刻的颜色关键应用，相机传感器应该很好地理解，并有一个已知的校准方法。在图像预处理过程中，可能需要对个别颜色进行补偿。(参见第一章关于摄像头传感器的讨论。)

不完全

特征并不总是以它们被期望的方式或它们被学习的方式在图像中逐帧呈现。这些特征可能看起来不完整。不完整性的关键属性包括:

*   **杂波:**特征被周围的图像特征遮挡，特征混叠并融合到周围的像素中。
*   **遮挡:**特征部分隐藏；在许多情况下，应用会遇到被遮挡的要素或要素集。
*   **离群值，接近度:**有时只使用某些区域的特征，必须检测并忽略离群特征。
*   噪声:可能来自雨水、坏的图像传感器和许多其他来源。噪声是一个持续存在的问题，如果理解的话，可以在预处理过程中使用多种滤波方法进行补偿。
*   **运动模糊:**如果测量并理解，在预处理期间可以使用滤波来补偿运动模糊。
*   **抖动、抖动:**运动伪影、抖动或抖动可以被校正，但并不总是如此；这可能是一个难以满足的鲁棒性标准。

分辨率和精确度

关于分辨率、比例和距离的鲁棒性通常是计算机视觉的一个挑战。当使用依赖于离散像素大小的特征度量时尤其如此，其中像素面积随距离而变化。例如，仅依赖于像素邻域结构的特征度量不能很好地或容易地缩放，例如相关性模板和大多数局部区域核方法。其他描述符，例如基于形状因子的描述符，可以提供像素区域结构无法实现的鲁棒性。根据应用的不同，可能需要不止一种描述符方法来处理分辨率和缩放。

为了应对分辨率和距离鲁棒性的挑战，在实践中采用了各种方法，例如尺度空间图像金字塔集合和特征空间金字塔，它们包含特征的多尺度表示。分辨率和距离稳健性的关键标准包括:

*   **定位精度或位置:**在缩放、旋转、噪声和其他标准下，度量需要提供多接近的坐标位置？需要像素精度还是亚像素精度？特征描述的区域精度方法也不能确定位置精度；例如，使用 HAAR-like 特征和积分图像的方法会受到最大的影响，因为在计算 HAAR 矩形时，矩形中的所有像素被加在一起，从而丢弃了对单个像素位置的区分。像素级特征精度也是一个挑战，因为随着特征的移动和旋转，它们会变形，并且像素采样伪像会产生不确定性。
*   **形状和厚度扭曲:**距离、分辨率和旋转共同扭曲了像素样本的形状，因此某个特征可能看起来比实际更厚或更薄。失真是一种采样伪像。
*   **焦平面或深度:**根据距离的不同，每个像素覆盖的像素区域会改变大小。在这种情况下，当与 RGB 或其他传感器一起使用时，深度传感器可以提供一些帮助。
*   **像素深度分辨率:**例如，可能需要使用 float 或 unsigned short int 作为最小值来处理颜色通道以保持位精度。

几何变形

也许图像特征最常见的失真是几何失真，因为随着照相机的移动和物体的移动，几何失真有多种形式。稳健性的几何属性包括以下内容:

*   **标度:**距视点的距离**，**一个通常被提及的鲁棒性标准。
*   **旋转:**在许多应用中很重要，例如工业检测。
*   **几何扭曲:**活动识别和动态纹理分析领域的关键研究领域，详见第四章和第六章。
*   **倒影:**将图像翻转 180 度。
*   **径向失真:**深度感测中的一个关键问题，通常对于 2D 相机的几何结构也是如此，因为深度场不均匀或不简单；参见第一章。
*   **极畸变:**深度传感几何中的一个关键问题；参见第一章。

效率变量、成本和收益

我们认为效率与计算、内存和提供的总不变性属性有关。特征描述符或特征度量的效率如何？创建指标需要多少计算量？存储该指标需要多少内存？指标有多准确？与计算和内存成本相比，提供了多少稳健性和不变性？要回答上述问题非常困难，这取决于如何为应用实施整个视觉流水线，以及可用的计算资源。Vision Metrics 分类法提供了追踪这些问题的信息，但是像往常一样，追踪错误的问题可能会导致错误的答案。

区别和独特性

使用各种方法来选择最佳的、有区别的特征。例如，局部特征检测器方法基于诸如角强度之类的标准，仅过滤出最有区别或唯一的候选；然后在选定的兴趣点上计算描述符作为斑块或其他形状；最后基于唯一性标准接受或拒绝结果描述符。唯一性也是创建第四章中讨论的稀疏码本的关键标准。

如第四章所述，可通过仅根据描述符信息重建图像的能力来衡量辨别能力。具有太少信息以充分重建图像的描述符可能被认为是弱的或无鉴别能力的。

通用视觉度量分类

为了理解特性度量，我们开发了一个由汇总标准组成的视觉度量分类法。选择每个标准时，都要考虑实际的工程观点，以便为评估和具体实施提供信息，例如算法、频谱、内存大小和其他属性。视觉度量分类的基本类别在表 5-1 中显示，并在此以列表形式总结，每个列表项在本章的单独章节中讨论:

*   特征描述符族
*   光谱维数
*   光谱值
*   兴趣点
*   存储格式
*   数据类型
*   描述符存储器
*   特征形状
*   特征模式
*   特征密度
*   特征搜索方法
*   模式对抽样
*   图案区域大小
*   距离函数
*   运行时计算

表 5-1 。视觉度量分类

![Table5-1.jpg](img/Table5-1.jpg)

分类法中使用的许多背景概念在第四章中讨论，其中分析了关于内部结构的属性和公共特性的目标。此外，在本章后面的特性度量评估(FME) 信息表中说明了这种分类。在第六章特性描述符调查中使用了分类的一个小子集来记录摘要信息。表 5-1 中的分类法是收集和总结信息的指南。没有记录或暗示对良好或性能的判断。

特征描述符系列

如本章开头所述，特性描述符在这种分类法中分类如下:

*   局部二进制描述符
*   光谱描述符
*   基础空间描述符
*   多边形形状描述符

光谱尺寸

记录在特征描述符中的谱或值是变化的，并且可以包括一种或多种类型的信息或谱。我们将类别划分如下:

*   **单变量:**存储单个值，如积分图像或区域平均值，或者只是一组简单的像素梯度。
*   **多元:**存储多个光谱；例如，诸如颜色信息、梯度大小和方向以及其他值的光谱的组合。

光谱类型

特征描述符的光谱类型是该分类法的主轴，如图 5-1 中的所示。以下是常见的光谱，它们已经在第三章的中讨论过，也将在第六章的中讨论。

*   **梯度幅度:**局部区域纹理或差异的度量，被广泛的基于面片的特征描述符方法所使用。众所周知[248]，人类视觉系统在视网膜上以比例和旋转不变的方式响应梯度信息，如 SIFT 和许多其他特征描述方法所示，因此梯度的使用是计算机视觉的首选方法。
*   **梯度方向:**一些描述符方法计算梯度方向，而另一些不计算。一些特征描述符和边缘检测方法(包括 Sobel 和 SIFT)使用简单的区域梯度方向方法来提供旋转不变性。
*   **方向向量:**有些描述符是有方向的，有些不是。可以通过简单梯度之外的方法来计算方向，例如，SURF 使用对许多梯度方向进行采样的方法来计算整个补片区域的主要梯度方向，作为方向向量。在 RIFF 方法中，计算径向相对方位。在 SIFT 方法中，在主方向的 80%内检测到的任何方向将导致生成额外的兴趣点，因此相同的描述符可以允许多个兴趣点仅在方向上不同。
*   **传感器数据:**加速度计或 GPS 信息等数据被添加到描述符中。在 GAFD 方法中，由加速度计计算的重力矢量用于定向。
*   **多重几何:**共同存储在描述符中的描述符数据的多重几何变换，例如 RFM2.3 描述符中使用的相同数据的若干不同透视变换；后者包含通过各种几何变换计算的相同面片，以增加缩放、旋转和几何鲁棒性。
*   **多尺度:**描述符存储了几个尺度表示的副本，而不是依赖于尺度空间金字塔。在第四章中描述的多分辨率直方图方法是一种在一个尺度范围内近似特征描述的方法，其中尺度使用一个高斯模糊函数范围来近似，并且它们产生的直方图被存储为多尺度描述符。
*   **傅立叶幅值:**傅立叶级数的正弦和余弦基函数均可用于描述符中——例如，在描述符的多边形形状族中，如图图 6-29 所示。正弦或余弦的大小本身就是一个有启发性的形状因子，没有相位，如图图 6-6 所示，该图显示了 LBP 通过傅立叶级数产生的功率谱的直方图。这说明了 LBP 直方图功率谱如何提供旋转不变性。与傅立叶级数相关的其他方法可以使用计算的替代方案，例如离散余弦变换(DCT ),其仅使用余弦分量，并且服从于整数计算和硬件加速，如通常为媒体应用所做的那样。
*   **傅立叶相位:**相位信息已经被证明对于创建模糊不变特征描述符是有价值的，正如在第六章中讨论的 LPQ 方法中所展示的。
*   **其他基函数:**可用于特征描述。由于对函数窗口的更大控制以及将从母小波导出的基函数调整到相关小波族中，小波通常用于代替傅立叶方法。参见第二章讨论小波与其他基函数的比较。
*   **形态形状度量:**主要用于多边形形状描述子家族，由形状因子*、*组成，在一些文献中称为*图像矩*。它们是根据多边形图像区域的总体特征(如面积、周长、质心等)计算的。用于多边形形状描述的视觉流水线和图像预处理可以包括形态学和纹理算子，而不是局部兴趣点和描述符计算。
*   **学习的二进制描述符:**通过训练步骤运行基础事实数据来创建，例如在 ORB 和 FREAK 中开发的，以创建一组统计优化的二进制采样点对模式。
*   **字典、码本、来自特征学习方法的词汇:**使用各种各样的描述符方法，如简单图像相关补丁或 SIFT 描述符，建立视觉词汇、字典或稀疏码本，作为独特特征的稀疏集合。当组合成一个稀疏集合时，它们代表了在一个应用领域(如汽车识别或人脸识别)的一组基本事实数据中发现的特征。
*   **区域直方图 2D:** 用于几种类型的信息，如宁滨梯度方向，如在 CARD、RFM2.3 和 SURF 中；或者用于宁滨线性二进制模式，例如 LBP。直方图梯度信息的 SIFT 方法使用相当大的直方图仓区域，其提供了一些平移不变性，类似于人类视觉系统对视网膜上梯度的 3D 位置的处理[248]。
*   **3D 直方图:**用于 SIFT 等方法，将梯度大小和方向一起表示为 3D 直方图。
*   **笛卡尔箱:**将局部区域信息宁滨到描述符中的一种常用方法，简单地基于像素在面片中的笛卡尔位置——例如，用直方图表示区域中每个点的像素强度大小。
*   **对数极坐标仓:**代替笛卡尔直角排列中的宁滨局部区域特征信息，诸如 GLOH 的一些描述符使用对数极坐标系统来准备直方图宁滨的值，目的是向描述符添加更好的旋转不变性。
*   **区域求和:**比如一幅积分图像，一种用来快速求和局部区域像素值的方法，或者 HAAR 特征。区域总和被存储到表示该区域中所有像素的总值的特征中。注意，区域求和对于区域的粗略特征描述可能是好的，但是求和过程消除了精细的局部纹理细节。
*   **区域平均值:**一个区域内像素的平均值，也称为箱式滤波器，可以通过卷积运算、缩放积分图像或简单地将数组中的像素值相加来计算。
*   **区域统计:**如区域矩，如标准差、方差、最大值或最小值。
*   **二进制模式:**诸如二进制值或位的向量——例如，作为在本地二进制描述符族(诸如 LBP、Census 和 ORB)中使用的本地邻域像素值的本地像素对比较计算的结果而存储。
*   **DoG (1 比特量化的):**如在 FREAK 描述符中所使用的，一组不同大小的 DoG 或带通滤波器特征，在类似于人的视觉系统的视网膜采样模式中的局部二进制区域上获取，成对比较，并量化为直方图向量中的单个比特。
*   **DoG(多位):**一种使用许多变体实现的带通滤波器，其中将高斯模糊滤波器应用于图像，然后从(a)其自身的移位副本，(b)其自身在另一高斯模糊级别的副本，或(3)其自身在另一图像比例的副本中减去图像，如在 SIFT 描述符方法中。
*   **值的位向量:**包含量化为单个位的值序列的位串，如阈值。
*   **3D 表面法线:**除 3D 中的模拟 2D 梯度，在 HON4D 方法[198]中使用，以在特征描述符中描述 3D 物体位置的表面。
*   **线段度量:**如在 CCH 方法中，用于描述组成物体周长的线段。或者，用作物体的形状因子，在描述符中记录了一组从形心开始延伸到周长的径向线段的长度，可将其输入傅里叶变换以产生功率谱特征，如图图 6-29 所示。
*   **颜色空间信息:**一些描述符没有利用颜色信息，在许多情况下，颜色信息可以提供额外的区分和准确性。无论是使用简单的 RGB 通道，如 RGB-D 方法[75，118]，还是使用色彩空间转换到更精确的空间，都是非常宝贵的。例如，人脸识别在区分来自不同文化的人脸方面存在问题，并且由于肤色在不同区域有所不同，因此可以测量颜色值并将其添加到描述符中。然而，一些描述符利用颜色信息，例如 S-LBP，其在色度、精确的颜色空间(例如 CIE-Lab)中操作，或者 F-LBP，其计算从中心像素到相邻像素的颜色距离的傅立叶光谱，以及 SIFT 和许多其他颜色变量。
*   **灰度信息:**灰度或颜色强度值是几乎所有描述符中的默认光谱。然而，用于从颜色创建灰度的方法，以及用于为分析和测量准备强度的图像预处理，对于视觉流水线至关重要，在第二章中讨论过。

兴趣点

在特征描述中，兴趣点的使用是可选的。一些方法不使用兴趣点，而是在固定的网格上而不是在每个像素上对图像进行采样，例如 Viola Jones 方法使用类似 HAAR 的特征。也可以简单地为每个像素而不仅仅是感兴趣的点创建特征描述符，但是由于对性能的影响是相当大的，所以感兴趣的点通常用于首先找到特征的最佳位置。

在第六章中对几种寻找兴趣点的方法进行了调查和讨论。分类法的兴趣点类别包括:

*   **点、边或角:**这些方法通常从定位局部区域最大值和最小值开始；使用的方法包括梯度，局部曲率，哈里斯方法，斑点检测器和边缘检测器。
*   **基于轮廓，周长:**一些方法不是在最大值和最小值处开始特征描述，而是在图像中寻找结构，例如轮廓或周长，这主要适用于基于形态学形状的方法。
*   **其他:**确定兴趣点位置还有其他可能，比如预测可能的兴趣点或特征位置，或者使用网格或瓦片区域。
*   **无兴趣点:**有些方法根本不使用任何兴趣点。

存储格式

存储格式对于内存效率、工程实际系统和设计数据结构来说是一个实际问题。了解存储格式可以在工程和优化过程中为各种编程结构、指令集和内存架构提供指导。

例如，CPU 和 GPGPU 图形处理器通常都提供专用芯片来支持各种存储格式组织，如分散和聚集操作，以及稀疏和密集数据结构支持。了解 GPGPU 的功能可以为设计存储格式提供指导，如第八章中所述。存储格式摘要:

*   **光谱向量:**可以是一组直方图，一组颜色值，一组基向量。
*   **位向量:**局部二进制模式使用位向量数据类型，有些编程语言包含位向量构造，有些指令集包含位向量处理指令。
*   **多元集合:**统计矩或形状因子等一组值。

数据类型

用于特征描述的数据类型对于准确性、内存使用和计算至关重要。但是，值得注意的是，在某些情况下，为了保证准确性，可以更改数据类型。举例来说，将浮点运算转换成定点或整数运算可能更具存储器效率以及功率效率，因为浮点硅 ALU 复合体占据几乎四倍多的裸片空间，因此比整数 ALU 消耗更多的功率。数据类型摘要包括:

*   **浮点:**许多应用需要浮点以保证精度。例如，图像的傅立叶变换需要至少 64 位双精度(更大的图像需要更高的精度)；目标跟踪等其他应用可能需要 32 位浮点来进行精确的轨迹计算。
*   **整数:**像素值通常用 8 位值表示，每像素 16 位是常见的，因为图像传感器提供更好的数据。许多数据结构和数值结果(如积分图像)至少需要 32 位整数。
*   **定点:**这是浮点的替代表示，节省了数据空间，可以更高效地在硅片中实现。大多数现代 GPU 支持几种定点格式，也支持一些 CPU。定点格式包括 8 位、16 位和 24 位表示。取决于应用，使用固定点可能足够接近精度。除了定点数据类型，GPU 和一些处理器还提供各种规范化数据类型(参见制造商信息)。

描述符存储器

总描述符内存大小是描述符效率的一部分，计算性能是另一个组成部分。具有较大内存占用、较少不变性属性和繁重计算的描述符是低效的。实际上，我们对内存大小感兴趣。与内存相关的主要属性包括:

*   **固定长度或可变长度:**一些描述符允许替代表示。
*   **字节计数:**描述符中所有数据的长度。

特征形状

一系列形状用于像素采样模式；在第四章中调查形状，包括以下方法:

*   **矩形块面片:**简单的 *x，y，dx，dy* 范围。
*   **对称多边形区域:**可能是八边形，如在责难方法中，或者是圆形区域，如 FREAK 或 DAISY。
*   **不规则分割区域:**例如使用形态学方法在分割区域或阈值化周长之后计算的。
*   **体积区域:**一些特征利用了类似于体积结构的图像堆叠。如图图 6-12 所示，VLBP 或体积 LBP 和 LBP-TOP 利用了体积数据结构。动态纹理方法和活动识别方法通常使用来自当前帧加上 2 个过去帧的三个相邻片的集合，以时空图像帧历史来组织，类似于体积。
*   **可变形:**大部分特征使用刚性形状，比如固定大小的矩形或圆形；然而，一些描述符在设计时考虑了变形，例如比例变形[345，346]和仿射或单应变形[220]，以实现更鲁棒的匹配。

特征模式

特征模式是这个分类的主轴，如图 5-3 中的所示，因为它影响内存架构和计算效率。

![9781430259299_Fig05-03.jpg](img/9781430259299_Fig05-03.jpg)

图 5-3 。特征形状。(从左到右)矩形面片、对称多边形区域、不规则分段区域和体积区域

特征形状和图案是相关的。形状指的是边界，图案指的是采样方法。模式包括:

*   **矩形核:**有些方法用一个核来定义样本中包含区域中的哪些元素；参见图 5-3 (左图)显示了一个不使用该区域角点像素的内核；参见图 4-10 。
*   **二元比较模式:**如 FREAK、ORB、BRISK，将一个区域中的特定像素配对，形成一个复杂的采样模式。
*   **DNET 线采样带集合:**沿线段点密集采样；参见图 4-8 。
*   **径向线采样模式:**从中心点开始的径向线段上的点被密集采样；例如，用于计算多边形区域形状的傅立叶描述符；参见图 6-29 。
*   **周界或轮廓边缘:**对形状或区域边缘周围的点进行密集采样。
*   **样本加权模式:**如图图 6-17 所示，SIFT 在直方图面元中使用一个圆形加权模式，以减少远离面片中心的点的贡献。D-NETS 方法使用沿线带样本的二进制加权，偏向远离端点的点，忽略靠近端点的点。加权模式可以提供对噪声和遮挡的不变性。

参见第四章关于贴片和形状部分的更多插图。

特征密度

如图 5-1 所示，特征密度是这个分类法的主轴。用于描述符的图像量在该分类法中被称为*特征密度*。例如，一些描述符旨在使用锚定在兴趣点的局部像素的较小区域，并忽略较大的图像。其他方法使用更大的区域。密度类别包括:

*   **全局:**覆盖整个图像，图像中的每个像素。
*   **区域:**覆盖图像的相当大的区域，通常在网格上，或在分割的结构或区域周围，不在兴趣点锚定。
*   **稀疏:**可以在感兴趣的点，或者在选定点的小区域中进行，例如在简短描述符中的随机点，训练点，例如 FREAK 和 ORB，或者在 RFM2.3 描述符中的稀疏采样网格。

特征搜索方法

在图像中搜索特征的方法对于特征描述符的设计具有重要意义。搜索方法在很大程度上决定了描述符的设计，以及视觉流水线中所需的计算时间。我们在这里列出了几个搜索变体，更详细的描述和图示在第四章中提供。注意，特征描述符可以利用多个搜索标准。功能搜索相关信息总结如下:

*   **由粗到细的图像金字塔:**或多尺度搜索，使用原始图像的较粗分辨率副本的金字塔。
*   **尺度空间金字塔:**尺度空间金字塔是常规的由粗到细的图像金字塔的变体，其中在每个金字塔尺度图像上计算高斯模糊函数[547]以创建更均匀的搜索空间；参见图 4-17 。
*   **金字塔标度因子:**捕捉金字塔标度区间，例如八度音阶或其他标度，例如，ORB 使用约 1.41x 标度。
*   **密集滑动窗口:**在图像中的每个像素上进行搜索，通常在以每个像素为中心的滑动矩形区域内。
*   **网格分块搜索:**图像被分成固定的网格或分块，因此搜索速度更快，但不如密集方法有区别。例如，参见描述 PHOG 方法的图 6-17 ，该方法在整个图像中以不同的网格分辨率计算描述符。
*   **窗口搜索:**将密集搜索限制到特定区域，例如在两个 L/R 帧之间的立体匹配中，对应搜索范围被限制到预期位置。
*   **兴趣点稀疏:**使用角点检测器或其他检测器来确定在哪里可以找到有效特征。
*   **预测点稀疏:**例如在像 PTAM 这样的跟踪和映射算法中，基于运动或轨迹预测兴趣点的位置，然后在预测点开始特征搜索。
*   **分割区域稀疏:**例如，当形态学形状分割方法或阈值分割方法定义一个区域，并且第二次通过该区域寻找特征时。
*   **深度分割区域(Z):** 当使用深度相机信息将图像阈值化为前景和背景，并且仅搜索前景区域的特征时。
*   **超像素搜索:**类似于图像金字塔方法，但图像的多尺度表示是通过使用超像素整合方法将像素值组合在一起而创建的，如第二章所述。
*   **亚像素搜索:**在需要亚像素精度的情况下——例如，对于区域相关性，围绕单个像素进行多次搜索，每次比较都计算亚像素偏移，在某些情况下，在特征匹配之前进行图案的几何变换。
*   **双尺度第一金字塔等级:**在 SIFT 尺度-空间金字塔方法中，金字塔的最低等级是从全尺度图像的双 2x 线性插值版本计算的，这具有保留图像金字塔最低等级中的高频信息的效果，并且将稳定关键点的数量增加了大约四倍，这是非常显著的。否则，计算原始图像上的高斯模糊会导致丢弃大部分高频细节。

模式对抽样

对于局部二进制模式，模式对采样设计是创新的关键领域之一。使用诸如使用比较区域阈值的(中心像素<核心像素)的函数来比较点对，然后比较的结果形成二进制描述符向量。请注意，许多局部二进制描述符方法在第四章中进行了讨论和说明，以说明点对采样配置和比较函数的变化。点对采样的视觉分类包括:

*   **中心-边界对:**如在 LBP 家族和普查变换中。
*   **随机对分:**如在 BRIEF，在 ORB 半随机。
*   **以视网膜中央凹为中心的训练对:**如在 FREAK 和 Daisy 中。
*   **训练的点对:**许多方法使用真实情况数据来训练点对，以满足客观标准，例如 FREAK 和 ORB。
*   **对称对:**如 BRISK，提供对称间隔的长短线段，用于点对比较。

图案区域尺寸

局部模式区域的大小是一个关键的性能因素，即使内存访问可能来自快速寄存器文件和缓存。例如，如果我们执行 3×3 模式区域的卷积，每个内核有 9 次乘法，可能还有一次汇总乘法来缩放结果，每个像素总共有 10 次乘法。对于每次乘法，我们有两次内存读取，一次读取像素，一次读取内核值；我们有十次内存写操作，每次乘法一次。一幅 640x480 的图像有 307200 个像素，假设每像素灰度只有 8 位，那么每帧我们最终得到 3，072，000 次乘法运算、60，720，000 次内存读取和 307200 次写入的结果。更大的内核和更大的图像当然会增加更多的计算量。

有许多方法可以优化性能，我们将在关于视觉流水线工程的第八章中讨论。对于该属性，我们对以下内容感兴趣:

*   **边界框(x 尺寸，y 尺寸):**例如，矩形区域、圆形区域或多边形形状区域周围的边界框。

距离函数

计算模式匹配或对应是好的描述符的关键性能标准之一。特征匹配是准确性和性能之间的折衷，关键变量是特征描述符向量的数值类型和大小、距离函数以及特征数据库中的模式和搜索优化的数量。选择一个适合快速匹配的特征描述符是一个好目标。

一般来说，最快的距离函数是二进制族和汉明距离，后者用于局部二进制描述符族。这里列举了距离函数；详见第四章。

欧几里德距离族或笛卡尔距离族

*   欧几里得距离
*   平方欧几里德距离
*   余弦相似性
*   美国 L1 标准
*   固态硬盘 L2 标准
*   相关距离
*   海灵格距离

网格距离族

*   曼哈顿距离
*   棋盘或切比雪夫距离

统计距离族

*   推土机距离
*   马哈拉诺比斯距离
*   布雷柯蒂斯差分
*   堪培拉距离

二元或布尔距离族

*   L0 范数
*   汉明距离
*   雅克卡相似性

特征度量评估

本节从工程和设计的角度，阐述了如何从视觉度量分类中将特征描述符信息概括到实用的特征度量评估框架(FME)中的问题。

![image](img/sq.jpg) **注意**FME 旨在作为一个模板，用于捕获高级信息以进行基本分析。

效率变量、成本和收益

可以用简单的术语来衡量特征描述符的效率，例如计算成本和所使用的内存的好处与以准确性、区分度、鲁棒性和不变性的方式提供的好处的对比。该方法在时间、空间和电力成本方面提供了多少价值？效率指标包括:

*   **成本:** 计算、内存、时间、功耗
*   **好处:**提供了准确性、健壮性和不变性属性
*   **效率:**收益与成本

描述符中包含的数据的有效性各不相同——例如，包含具有很少不变性的描述符的大内存占用量是没有效率的，并且对于少量不变性和准确性的高计算成本也揭示了低效率。我们可以说，有效的特征表示包含最少的字节数和最低的计算成本，提供了最大的区分度、鲁棒性和准确性。局部二进制描述符已经证明了许多鲁棒性属性的最佳效率。

图像重建效率指标

对于特征描述符效率的视觉比较，我们也可以从特征描述符重建图像，然后视觉和统计地分析重建的质量与计算和存储成本。详细的特征描述符可以仅从描述符数据提供原始图像的良好可视化和重建。例如，图 4-15 示出了 HOG 描述符如何使用每 64x128 区域 32780 字节来捕获定向梯度，图 4-16 示出了图像重建，其示出了如何使用每描述符 64 字节来短暂和反常地捕获类似于拉普拉斯或其他边缘滤波器的边缘信息，图 4-17 示出了使用每描述符 128 字节的 SIFT 图像重建。

虽然我们不包括 FME 中的图像重建效率，但该主题在第四章的歧视讨论中有所涉及。

示例特征度量评估

这里有几个例子，展示了如何使用 Vision Metrics 分类法和 FME 来收集摘要描述符信息。

筛选示例

我们使用 SIFT 作为示例基线，因为 SIFT 得到了广泛的认可和精心的设计。

视觉计量分类学 FME

<colgroup><col width="15%"> <col width="25%"> <col width="60%"></colgroup> 
|  | *名称:* | *筛选* |
|  | *功能系列:* | *光谱* |
|  | *光谱维度:* | *多元* |
|  | *光谱:* | *梯度大小和方向，狗骨尺度空间最大值* |
|  | *存储格式:* | *方向和位置，梯度方向直方图* |
|  | *数据类型:* | *浮点数，整数* |
|  | *描述符存储器:* | *描述符直方图的 128 字节* |
|  | *特征形状:* | *矩形区域* |
|  | *搜索方法:* | *2D 密集的滑动窗口& 3D 3x3x3 影像金字塔* |
|  | *特征密度:* | *本地* |
|  | *特征模式:* | *长方形和棱锥立方体* |
|  | *模式对采样:* | *-* |
|  | *图案区域大小:* | *16x16* |
|  | *距离功能:* | *欧几里德距离* |

一般鲁棒性属性

<colgroup><col width="15%"> <col width="25%"> <col width="60%"></colgroup> 
|  | *总计:* | *5(缩放、照明、旋转、仿射变换、噪声)* |

LBP 示例

LBP 是一个非常简单的特征检测器，有许多变化，用于纹理分析和特征描述。这里我们用最基本的 3x3 LBP 形式作为例子。

视觉计量分类学 FME

<colgroup><col width="15%"> <col width="25%"> <col width="60%"></colgroup> 
|  | *名称:* | *LBP* |
|  | *功能系列:* | *本地二进制* |
|  | *光谱维度:* | *单变量* |
|  | *光谱:* | *像素对与中心像素进行比较* |
|  | *存储格式:* | *二进制位向量* |
|  | *数据类型:* | *整数* |
|  | *描述符存储器:* | *1 字节* |
|  | *特征形状:* | *以中心像素为中心的正方形* |
|  | *搜索方法:* | *密集滑动窗口* |
|  | *特征密度:* | *本地* |
|  | *特征模式:* | *矩形内核* |
|  | *模式对采样:* | *中心边界对* |
|  | *图案区域大小:* | *3x3 或更多* |
|  | *距离功能:* | *海明距离* |

一般鲁棒性属性

<colgroup><col width="15%"> <col width="25%"> <col width="60%"></colgroup> 
|  | *总计::* | *3(使用 RILBP 的亮度、对比度和旋转)* |

形状因素示例

此示例使用二进制阈值多边形区域。对于这个假设的例子，预处理步骤从自适应二进制阈值处理和形态学形状定义操作开始，测量步骤从基于像素邻域的周界开始，以定义周界边缘，接着从周界点进行质心计算，接着确定从质心开始到达周界的 36 条径向线段。然后分析每个线段以找到形状因子，包括傅立叶描述符的长/短轴。测量假设正在测量单个二进制对象，而真实世界的图像可能包含许多对象。

我们还假设存储器占用空间如下:从质心开始以 10 度增量在 360 度周围获取的 36 个角度样本，36 个 FFT 频谱幅度的浮点，36 个线段长度数组的整数，4 个长/短轴方向和长度的整数，4 个边界框( *x，y，dx，dy* )的整数，1 个周长的整数，2 个质心坐标的整数，总共 36*4 + 36*2 + 4*2 + 4*2 + 1*2 * 2*2 = 238

视觉计量分类学 FME

<colgroup><col width="15%"> <col width="25%"> <col width="60%"></colgroup> 
|  | *名称:* | *形状因子* |
|  | *功能系列:* | *多边形形状* |
|  | *光谱维度:* | *多元* |
|  | *光谱:* | *周长跟随、面积、周长、质心、其他图像矩* |
|  | *存储格式:* | *复杂的数据结构* |
|  | *数据类型:* | *浮点数，整数* |
|  | *描述符存储器:* | *变量，可能有几百个字节* |
|  | *特征形状:* | *多边形形状，矩形包围盒区域* |
|  | *搜索方法:* | *密集，递归* |
|  | *特征密度:* | *地区* |
|  | *特征模式:* | *周界轮廓或边缘* |
|  | *模式对采样:* | *-* |
|  | *图案区域大小:* | *整个图像* |
|  | *距离功能:* | *多种方法，多种比较* |

一般鲁棒性属性

<colgroup><col width="15%"> <col width="25%"> <col width="60%"></colgroup> 
|  | *总计:* | *8 或更多(缩放、旋转、遮挡、形状、仿射、反射、噪声、照明)* |

摘要

本章提出了一个分类法，如图 5-1 所示，将特征描述维度描述为形状、模式和光谱。这种分类法用于将特征描述方法分为多边形形状描述符、局部二元描述符和基空间描述符。这种分类法贯穿全书。此外，为了总结高级特征描述符设计属性，如光谱类型、描述符像素区域大小、距离函数和搜索方法，提出了通用视觉度量分类法。此外，基于不变性和鲁棒性标准属性，包括光照、比例、旋转和透视，开发了通用鲁棒性分类来量化特征描述符的良好性，一次一个属性。由于特征描述符方法被设计成仅处理一些不变性和鲁棒性属性，所以当评估给定应用的特征描述符时，应该单独考虑每个属性。此外，稳健性属性可应用于真实情况数据集的设计，如第七章所述。最后，视觉度量分类和鲁棒性分类被组合以形成特征度量评估(FME)表，从而以概要形式记录特征描述符属性。FME 的一个简单子集用于回顾在第六章中调查的几种特征描述符方法的属性。

__________________

<sup>1</sup>。

<sup>2</sup> `http://homepages.inf.ed.ac.uk/rbf/CVonline/CVentry.htm` `。`